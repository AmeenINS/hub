/**
 * Verify Insurance Companies Import
 * This script verifies the imported insurance companies
 * 
 * Usage: npx tsx scripts/verify-insurance-companies.ts
 */

import { lmdb } from '../src/core/data/lmdb';
import { InsuranceCompany } from '../src/shared/types/database';

const DB_NAME = 'insuranceCompanies';

async function verifyImport() {
  console.log('üîç Verifying insurance companies import...\n');
  
  try {
    const companies = await lmdb.getAll<InsuranceCompany>(DB_NAME);
    const activeCompanies = companies.filter(c => !c.isDeleted);
    
    console.log(`üìä Total companies: ${activeCompanies.length}\n`);
    
    console.log('üìã List of imported companies:\n');
    console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');
    console.log('‚îÇ #  ‚îÇ Company Name                                     ‚îÇ License      ‚îÇ Status        ‚îÇ');
    console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');
    
    activeCompanies.forEach((company, index) => {
      const name = company.nameEn.padEnd(48).substring(0, 48);
      const license = (company.licenseNumber || 'N/A').padEnd(12);
      const status = company.status.padEnd(13);
      console.log(`‚îÇ ${String(index + 1).padStart(2)} ‚îÇ ${name} ‚îÇ ${license} ‚îÇ ${status} ‚îÇ`);
    });
    
    console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');
    
    // Show detailed info for first company
    if (activeCompanies.length > 0) {
      console.log('\nüìù Sample company details (first company):\n');
      const sample = activeCompanies[0];
      console.log(`   ID: ${sample.id}`);
      console.log(`   Name: ${sample.nameEn}`);
      console.log(`   Code: ${sample.code}`);
      console.log(`   License: ${sample.licenseNumber}`);
      console.log(`   Email: ${sample.email}`);
      console.log(`   Phone: ${sample.phone}`);
      console.log(`   Website: ${sample.website}`);
      console.log(`   Address: ${sample.addressEn?.substring(0, 60)}...`);
      console.log(`   Status: ${sample.status}`);
      console.log(`   CR Number: ${sample.metadata?.crNumber}`);
      console.log(`   Created: ${sample.createdAt}`);
    }
    
    console.log('\n‚úÖ Verification completed successfully!');
  } catch (error) {
    console.error('‚ùå Verification failed:', error);
    throw error;
  }
}

verifyImport()
  .then(() => process.exit(0))
  .catch(() => process.exit(1));
